#sidebar rock_mongo_toc

<wiki:toc/>

== How plug-in works ==

== Write a plug-in ==

== API ==
=== Filters ===
==== SERVER_FILTER ====
filter server before authentication, give a chance to integrate authentication with your own system.
 * Params:
     * MServer $server the server which current user want to log-in
 * Demo:
{{{
RFilter::add("SERVER_FILTER", function (MServer $server) {
    $user = $_COOKIE["user"];//suppose you store user name in cookie
    
    //connect to your MySQL or other system to decide which mongo host to log-in

    //set mongo parameters
    $server->setMongoHost("192.168.1.1");
    $server->setMongoUser("...");
    $server->setMongoPass("...")

    //let the user log-in in without internal authentication filter
    $server->setControlAuth(false);
    $server->setMongoAuth(false);

    //now user log-in with your own authentication
});
}}}


=== Events ===