#summary Sockets相关设计

<wiki:toc/>

= 目标 =

 * 提供一个持久连接池
 * 可以管理大厅、房间、实时交互、服务器段计时
 * 要求同时在线1000人(8 CPU 8G Mem)
 * 可以自由增加新的服务器

= 参考 =
 
 * INotify
 * Libevent
 * Stomp
 * NP的游戏server
 * smartfoxserver

= Socket =

参考：http://livedocs.adobe.com/flash/9.0/ActionScriptLangRefV3/flash/net/XMLSocket.html 

 * onConnect($success)
 * onClose()
 * onData($msg)

= 玩家 =

= 工会 =

= 服务器 =

{{{
[{
   "name": "北京服务器",
   "uri": "192.168.0.100:8000"
}, ...]
}}}

== 超时 ==

== 自动断线 ==

== 错误恢复 ==

= 大厅 =

{{{
[{
  "name": "新手1",
  "rooms": [
       102, 208, ...
   ]
},
 ...
]
}}}

= 房间 =

== 属性 ==

{{{
{
   "name": "iwind的房间",
   "password": "123456",
   "players": [{
       "id": 1, "state":"playing|left|watching", "position": 1
   }, ...]
}

}}}

== 创建房间 ==

= 计时 =

= 事件 =

 * subscribe()
 * unsubscribe()
 * notify()
 * ack()

= 命令 =

可以先试着用JSON格式。

 * player - 用户
 * code - 代号
 * body - 内容体